---
title: "SSD + Docker Setup"
description: "Set up NVMe SSD storage and configure Docker on your Jetson for optimal performance with AI containers and large models."
category: "Setup"
section: "Environment Setup"
order: 3
tags: ["setup", "jetson", "ssd", "nvme", "docker", "storage", "containers"]
---

import Tabs from '../../components/Tabs.astro';

Once you have your Jetson set up by flashing the latest Jetson Linux (L4T) BSP on it or by flashing the SD card with the whole JetPack image, before embarking on testing out all the great generative AI applications using `jetson-containers`, you want to make sure you have a huge storage space for all the containers and the models you will download.

This guide shows how you can install SSD on your Jetson and set it up for Docker.

---

## SSD

### Physical Installation

1. **Unplug power** and any peripherals from the Jetson developer kit.

2. **Physically install** an NVMe SSD card on the carrier board of your Jetson developer kit, making sure to properly seat the connector and secure with the screw.

3. **Reconnect** any peripherals, and then reconnect the power supply to turn on the Jetson developer kit.

4. Once the system is up, **verify** that your Jetson identifies a new memory controller on PCI bus:

```bash
lspci
```

The output should look like:

<pre style="background: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 8px;"><code>{"0007:01:00.0 Non-Volatile memory controller: Marvell Technology Group Ltd. Device 1322 (rev 02)"}</code></pre>

---

### Format and Set Up Auto-mount

1. Run `lsblk` to find the device name:

```bash
lsblk
```

The output should look like:

<pre style="background: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 8px; white-space: pre-wrap;"><code>{"NAME         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nloop0          7:0    0    16M  1 loop\nmmcblk1      179:0    0  59.5G  0 disk\n‚îú‚îÄmmcblk1p1  179:1    0    58G  0 part /\n‚îú‚îÄmmcblk1p2  179:2    0   128M  0 part\n‚îú‚îÄmmcblk1p3  179:3    0   768K  0 part\n‚îú‚îÄmmcblk1p4  179:4    0  31.6M  0 part\n‚îú‚îÄmmcblk1p5  179:5    0   128M  0 part\n‚îú‚îÄmmcblk1p6  179:6    0   768K  0 part\n‚îú‚îÄmmcblk1p7  179:7    0  31.6M  0 part\n‚îú‚îÄmmcblk1p8  179:8    0    80M  0 part\n‚îú‚îÄmmcblk1p9  179:9    0   512K  0 part\n‚îú‚îÄmmcblk1p10 179:10   0    64M  0 part\n‚îú‚îÄmmcblk1p11 179:11   0    80M  0 part\n‚îú‚îÄmmcblk1p12 179:12   0   512K  0 part\n‚îú‚îÄmmcblk1p13 179:13   0    64M  0 part\n‚îî‚îÄmmcblk1p14 179:14   0 879.5M  0 part\nzram0        251:0    0   1.8G  0 disk [SWAP]\nzram1        251:1    0   1.8G  0 disk [SWAP]\nzram2        251:2    0   1.8G  0 disk [SWAP]\nzram3        251:3    0   1.8G  0 disk [SWAP]\nnvme0n1      259:0    0 238.5G  0 disk"}</code></pre>

Identify the device corresponding to your SSD. In this case, it is `nvme0n1`.

2. **Format the SSD**, create a mount point, and mount it:

```bash
sudo mkfs.ext4 /dev/nvme0n1
```

> You can choose any name for the mount point directory. We use `/ssd` here, but in `jetson-containers`' [setup.md](https://github.com/dusty-nv/jetson-containers/blob/master/docs/setup.md) documentation, `/mnt` is used.

```bash
sudo mkdir /ssd
sudo mount /dev/nvme0n1 /ssd
```

3. **Set up auto-mount** to ensure the mount persists after boot:

First, identify the UUID for your SSD:

```bash
lsblk -f
```

Then, add a new entry to the `fstab` file:

```bash
sudo vi /etc/fstab
```

Insert the following line, replacing the UUID with the value found from `lsblk -f`:

```
UUID=************-****-****-****-******** /ssd/ ext4 defaults 0 2
```

4. **Change ownership** of the `/ssd` directory:

```bash
sudo chown ${USER}:${USER} /ssd
```

---

## Docker

### Install nvidia-container Package

<div class="admonition note">
<p class="admonition-title">üìò Note</p>
<p>If you used an NVIDIA-supplied SD card image to flash your SD card, all necessary JetPack components (including <code>nvidia-containers</code>) and Docker are already pre-installed, so this step can be skipped.</p>
</div>

```bash
sudo apt update
sudo apt install -y nvidia-container
```

<div class="admonition info">
<p class="admonition-title">‚ÑπÔ∏è JetPack 6.x users</p>
<p>If you flash Jetson Linux (L4T) R36.x (JetPack 6.x) on your Jetson using SDK Manager, and install <code>nvidia-container</code> using <code>apt</code>, on JetPack 6.x it no longer automatically installs Docker.</p>
<p>Therefore, you need to run the following to manually install Docker and set it up:</p>
</div>

```bash
sudo apt update
sudo apt install -y nvidia-container curl
curl https://get.docker.com | sh && sudo systemctl --now enable docker
sudo nvidia-ctk runtime configure --runtime=docker
```

### Configure Docker

1. **Restart Docker service** and add your user to the `docker` group:

```bash
sudo systemctl restart docker
sudo usermod -aG docker $USER
newgrp docker
```

2. **Add default runtime** in `/etc/docker/daemon.json`:

<Tabs labels={["‚ö° One-liner method", "‚úèÔ∏è Manual method"]}>
<div class="nv-tab-panel active">

```bash
sudo apt install -y jq
sudo jq '. + {"default-runtime": "nvidia"}' /etc/docker/daemon.json | \
  sudo tee /etc/docker/daemon.json.tmp && \
  sudo mv /etc/docker/daemon.json.tmp /etc/docker/daemon.json
```

</div>

<div class="nv-tab-panel">

Edit the file:

```bash
sudo vi /etc/docker/daemon.json
```

Insert the `"default-runtime": "nvidia"` line:

```json
{
    "runtimes": {
        "nvidia": {
            "path": "nvidia-container-runtime",
            "runtimeArgs": []
        }
    },
    "default-runtime": "nvidia"
}
```

</div>
</Tabs>

3. **Restart Docker:**

```bash
sudo systemctl daemon-reload && sudo systemctl restart docker
```

---

### Migrate Docker Directory to SSD

Now that the SSD is installed and available on your device, you can use the extra storage capacity to hold the storage-demanding Docker directory.

1. **Stop the Docker service:**

```bash
sudo systemctl stop docker
```

2. **Move the existing Docker folder:**

```bash
sudo du -csh /var/lib/docker/ && \
    sudo mkdir /ssd/docker && \
    sudo rsync -axPS /var/lib/docker/ /ssd/docker/ && \
    sudo du -csh /ssd/docker/
```

3. **Edit `/etc/docker/daemon.json`:**

```bash
sudo vi /etc/docker/daemon.json
```

Add the `"data-root"` line:

```json
{
    "runtimes": {
        "nvidia": {
            "path": "nvidia-container-runtime",
            "runtimeArgs": []
        }
    },
    "default-runtime": "nvidia",
    "data-root": "/ssd/docker"
}
```

4. **Rename the old Docker data directory:**

```bash
sudo mv /var/lib/docker /var/lib/docker.old
```

5. **Restart the docker daemon:**

```bash
sudo systemctl daemon-reload && \
    sudo systemctl restart docker && \
    sudo journalctl -u docker
```

---

### Test Docker on SSD

<Tabs labels={["üì∫ Terminal 1 - Monitor", "üíª Terminal 2 - Pull"]}>
<div class="nv-tab-panel active">

Open a terminal to monitor disk usage:

```bash
watch -n1 df
```

Observe that the disk usage on `/ssd` goes up as the container image is downloaded and extracted in Terminal 2.

</div>

<div class="nv-tab-panel">

Open a new terminal and start Docker pull:

```bash
docker pull ubuntu:22.04
```

Once complete, verify the image:

```bash
docker image ls
```

</div>
</Tabs>

---

## Final Verification

Reboot your Jetson and verify the following:

```bash
# Check SSD is recognized
sudo blkid | grep nvme

# Check disk space
df -h

# Check Docker root directory
docker info | grep Root

# List Docker directory on SSD
sudo ls -l /ssd/docker/

# Check Docker size
sudo du -chs /ssd/docker/

# Verify nvidia runtime
docker info | grep -e "Runtime" -e "Root"
```

Expected output should show:
- ‚úÖ SSD mounted at `/ssd`
- ‚úÖ Docker Root Dir: `/ssd/docker`
- ‚úÖ Default Runtime: `nvidia`

---

## ‚úÖ Your Jetson is Now Set Up!

Your Jetson is now configured with SSD storage and Docker optimized for AI workloads.

---

## Next Steps

<p>
<a href="/tutorials/genai-on-jetson-llms-vlms" class="nv-button">ü§ñ Introduction to GenAI ‚Üí</a>
<a href="/tutorials/ollama" class="nv-button secondary" style="margin-left: 1rem;">ü¶ô Ollama</a>
<a href="/models" class="nv-button secondary" style="margin-left: 1rem;">üì¶ Supported Models</a>
</p>

